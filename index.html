<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
    <link rel="stylesheet" href="main.css">
    <title>Document</title>
</head>

<body>
    <div class="contenedor" id="container"></div>
    <script type="text/javascript" src="http://fb.me/react-0.13.3.js">
    </script>
    <script type="text/javascript" src="http://fb.me/JSXTransformer-0.13.3.js">
    </script>
    <script type="text/jsx;harmony=true">
        var tasksList=["Despertar a las 8:00 am"];

        class AddTask extends React.Component{
          constructor(){
            super();
            this.getText=this.getText.bind(this);

          }

        getText(e){
          e.preventDefault();
          var text=e.target.querySelector('input');
          var value=text.value; text.value='';
          this.props.renderList(value);
        }
        render(){
          return  <form className="addTask" onSubmit={this.getText}>
                      <input type="text" placeholder="To do !!!" className="input" />
                  </form>
        }
      }
      class ListTask extends React.Component{
        constructor()
        { super();
          this.remove=this.remove.bind(this);
            this.complete=this.complete.bind(this);
        }

        complete(elemento){
        var value=elemento.target.parentNode.querySelector('span');
        value.classList.toggle("complete");
        console.log('complete');
      }
        remove(elemento){
          var value=elemento.target.parentNode.querySelector('span').innerText;
          console.log(value);
          this.props.remove(value);
        }
        render(){
        var items=this.props.tasks.map((e,indice)=>{
          return  <li key={indice} className="taskList btn-group btn-groupTask">
                    <span className="task">{e}</span>
                    <button className="btn btn-complete btn-default" onClick={this.complete}>b</button>
                    <button className="btn btn-delete btn-default" onClick={this.remove}>X</button>
                </li>
        });
        return <div className="tasks">
                    <ul className="container-task">
                        {items}
                    </ul>
                </div>
        }
      }
      class ToDo extends React.Component{
        constructor(props){
          super();
          this.state={tasks:props.tasks};
          this.renderList=this.renderList.bind(this);
          this.removeTask=this.removeTask.bind(this);
        }
        renderList(text){
          var update=this.state.tasks; update.push(text);
        this.setState({tasks:update});
      }
      removeTask(text){
        var update=this.state.tasks; update.splice(update.indexOf(text),1);
        this.setState({tasks:update});

      }
      render(){
        return <div>
                  <div className="title text-center">
                      <h3>To-Do</h3></div>
                  < AddTask renderList={this.renderList} />
                  < ListTask tasks={this.state.tasks} remove={this.removeTask}/>
              </div>
        } }
      React.render(<ToDo tasks={tasksList} />, document.getElementById('container'));
    </script>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>

</body>

</html>
